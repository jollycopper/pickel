<% provide :title, "Course detail" %>
<div class="container" id="listings-page">
  <div class="row">
    <div class="col-sm-12 listing-wrapper listings-top listings-bottom">

      <div class="row">
        <div class="col-sm-7">
          <h1>
            <%= @course.title %>
          </h1>
        </div>

        <div class="col-sm-5">
          <div class="quantity">
            <%= @course.quantity %>
            slots left
          </div>
        </div>
      </div>

      <hr>

      <div class="row">

        <div class="col-sm-7">
          <h3>
            Details
          </h3>

          <div class="row">

            <div class="col-xs-6">
              <table class="table">

                <tbody>
                <tr>
                  <th>
                    ID
                  </th>
                  <td>
                    <%= @course.id %>
                  </td>
                </tr>
                <tr>
                  <th>
                    Instructor
                  </th>
                  <td>
                    <%= @course.instructor %>
                  </td>
                </tr>

                </tbody>
              </table>
            </div>

            <div class="col-xs-6">
              <table class="table">

                <tbody>
                <tr>
                  <th>
                    Year
                  </th>
                  <td>
                    <%= @course.year %>
                  </td>
                </tr>
                <tr>
                  <th>
                    Term
                  </th>
                  <td>
                    <%= @course.term.capitalize %>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
          <p>
            <%= @course.description %>
          </p>
        </div>

        <div class="col-sm-5 center">
          <div class="row center">

            <div class="col-sm-12">
              <%= link_to image_tag("course-detail.jpg", alt: "Rails logo", class: "raised", style: "width: 100%"), 'http://rubyonrails.org/' %>
            </div>
          </div>
          <br>
          <br>

          <div class="col-sm-6" style="text-align: center; margin: 0 auto">
            <%= link_to 'Add to cart', "/cart/#{@course.id}", class: "btn btn-primary", style: "text-align: center; width: 150px" %>
          </div>

          <div class="col-sm-6" style="text-align: center; margin: 0 auto">
            <% is_cart_empty = !session[:cart] or session[:cart].empty? %>
            <%= link_to "Checkout", "/cart/checkout", style: "text-align: center;width: 150px;", class: "btn btn-primary #{'disabled' if is_cart_empty}" %>
          </div>

          <br>

        </div>

      </div>

    </div>

  </div>

</div>

<% if current_user.admin? %>
    <%= link_to 'Edit', edit_course_path(@course) %>
    |
    <%= link_to 'Back', courses_path %>
<% end %>
